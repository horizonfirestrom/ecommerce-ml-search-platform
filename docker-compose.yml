

services:
  ################################################
  # ðŸ”µ Search API Gateway (Spring Boot)
  ################################################
  search-api-gateway:
    build: ./backend/search-api-gateway
    container_name: search-api-gateway
    ports:
      - "8080:8080"
    depends_on:
      - query-understanding-service
      - nlp-embedding-service
      - vector-search-service
      - ltr-service
      - ab-testing-service
    networks:
      - searchnet

  ################################################
  # ðŸŸª Python microservices
  ################################################
  query-understanding-service:
    build: ./backend/query-understanding-service
    container_name: query-understanding-service
    ports:
      - "7003:7003"
    networks:
      - searchnet

  nlp-embedding-service:
    build: ./backend/nlp-embedding-service
    container_name: nlp-service
    ports:
      - "7002:7002"
    networks:
      - searchnet

  vector-search-service:
    build: ./backend/vector-search-service
    container_name: vector-search-service
    ports:
      - "7001:7001"
    networks:
      - searchnet

  ltr-service:
    build: ./backend/ltr-service
    container_name: ltr-service
    ports:
      - "7005:7005"
    networks:
      - searchnet

  ab-testing-service:
    build: ./backend/ab-testing-service
    container_name: ab-testing-service
    ports:
      - "7004:7004"
    networks:
      - searchnet

networks:
  searchnet:
    driver: bridge
